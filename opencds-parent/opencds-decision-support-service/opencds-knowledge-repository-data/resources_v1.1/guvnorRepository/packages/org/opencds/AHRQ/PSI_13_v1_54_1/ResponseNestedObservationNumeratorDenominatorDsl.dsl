[then] Response.Nested.Obs.Num.Denom - Create numerator value {numValue} as ID {numId} and denominator value {denomValue} as ID {denomId} for output observations focused on {ResponseObservationFocus:ENUM:ObservationFocusConcept.openCdsConceptCode} within enclosing observation ID {ROOT} = IVLDate obsTime{numId} = new IVLDate(); obsTime{numId}.setLow($evalTime); obsTime{numId}.setHigh($evalTime); ObservationResult childObs{numId} = new ObservationResult(); String childObs{numId}Id = "{numId}"; childObs{numId}.setId(childObs{numId}Id); childObs{numId}.setEvaluatedPersonId($evaluatedPersonId); childObs{numId}.setObservationEventTime(obsTime{numId}); childObs{numId}.setSubjectIsFocalPerson($evaluatedPersonId == $focalPersonId); childObs{numId}.setClinicalStatementToBeRoot(false); childObs{numId}.setToBeReturned(true); CD childObs{numId}Focus = new CD(); childObs{numId}Focus.setCodeSystem("2.16.840.1.113883.3.795.12.1.1"); childObs{numId}Focus.setCodeSystemName("OpenCDS concepts"); childObs{numId}Focus.setCode("{ResponseObservationFocus}"); childObs{numId}Focus.setDisplayName(GetOpenCDSConceptName("{ResponseObservationFocus}")); childObs{numId}.setObservationFocus(childObs{numId}Focus); int iChildObs{numId} = {numValue}; INT childObs{numId}IntegerValue = new INT(); childObs{numId}IntegerValue.setValue(iChildObs{numId}); ObservationValue childObs{numId}Value = new ObservationValue(); childObs{numId}Value.setInteger(childObs{numId}IntegerValue); childObs{numId}.setObservationValue(childObs{numId}Value); ClinicalStatementRelationship rel{numId} = new ClinicalStatementRelationship(); rel{numId}.setSourceId("{ROOT}"); rel{numId}.setTargetId("{numId}"); CD rel{numId}Code = new CD(); rel{numId}Code.setCodeSystem("2.16.840.1.113883.3.795.12.1.1"); rel{numId}Code.setCodeSystemName("OpenCDS concepts"); rel{numId}Code.setCode("C405"); rel{numId}Code.setDisplayName("Part of"); rel{numId}.setTargetRelationshipToSource(rel{numId}Code); java.util.List<RelationshipToSource> childObs{numId}RelationshipToSources = new java.util.ArrayList<RelationshipToSource>(); RelationshipToSource childObs{numId}RelationshipToSource = new RelationshipToSource(); childObs{numId}RelationshipToSource.setSourceId("{ROOT}"); childObs{numId}RelationshipToSource.setRelationshipToSource(rel{numId}Code); childObs{numId}RelationshipToSources.add(childObs{numId}RelationshipToSource); childObs{numId}.setRelationshipToSources(childObs{numId}RelationshipToSources); insert(childObs{numId}); namedObjects.put("childObs{numId}", childObs{numId}); insert(rel{numId}); namedObjects.put("rel{numId}", rel{numId}); IVLDate obsTime{denomId} = new IVLDate(); obsTime{denomId}.setLow($evalTime); obsTime{denomId}.setHigh($evalTime); ObservationResult childObs{denomId} = new ObservationResult(); String childObs{denomId}Id = "{denomId}"; childObs{denomId}.setId(childObs{denomId}Id); childObs{denomId}.setEvaluatedPersonId($evaluatedPersonId); childObs{denomId}.setObservationEventTime(obsTime{denomId}); childObs{denomId}.setSubjectIsFocalPerson($evaluatedPersonId == $focalPersonId); childObs{denomId}.setClinicalStatementToBeRoot(false); childObs{denomId}.setToBeReturned(true); CD childObs{denomId}Focus = new CD(); childObs{denomId}Focus.setCodeSystem("2.16.840.1.113883.3.795.12.1.1"); childObs{denomId}Focus.setCodeSystemName("OpenCDS concepts"); childObs{denomId}Focus.setCode("{ResponseObservationFocus}"); childObs{denomId}Focus.setDisplayName(GetOpenCDSConceptName("{ResponseObservationFocus}")); childObs{denomId}.setObservationFocus(childObs{denomId}Focus); int iChildObs{denomId} = {denomValue}; INT childObs{denomId}IntegerValue = new INT(); childObs{denomId}IntegerValue.setValue(iChildObs{denomId}); ObservationValue childObs{denomId}Value = new ObservationValue(); childObs{denomId}Value.setInteger(childObs{denomId}IntegerValue); childObs{denomId}.setObservationValue(childObs{denomId}Value); ClinicalStatementRelationship rel{denomId} = new ClinicalStatementRelationship(); rel{denomId}.setSourceId("{ROOT}"); rel{denomId}.setTargetId("{denomId}"); CD rel{denomId}Code = new CD(); rel{denomId}Code.setCodeSystem("2.16.840.1.113883.3.795.12.1.1"); rel{denomId}Code.setCodeSystemName("OpenCDS concepts"); rel{denomId}Code.setCode("C405"); rel{denomId}Code.setDisplayName("Part of"); rel{denomId}.setTargetRelationshipToSource(rel{denomId}Code); java.util.List<RelationshipToSource> childObs{denomId}RelationshipToSources = new java.util.ArrayList<RelationshipToSource>(); RelationshipToSource childObs{denomId}RelationshipToSource = new RelationshipToSource(); childObs{denomId}RelationshipToSource.setSourceId("{ROOT}"); childObs{denomId}RelationshipToSource.setRelationshipToSource(rel{denomId}Code); childObs{denomId}RelationshipToSources.add(childObs{denomId}RelationshipToSource); childObs{denomId}.setRelationshipToSources(childObs{denomId}RelationshipToSources); insert(childObs{denomId}); namedObjects.put("childObs{denomId}", childObs{denomId}); insert(rel{denomId}); namedObjects.put("rel{denomId}", rel{denomId}); //ResponseNestedObservationDenomNumDsl|||denomValue=={denomValue}|||denomId=={denomId}|||numValue=={numValue}|||numId=={numId}|||ROOT=={ROOT}|||ResponseObservationFocus=={ResponseObservationFocus}